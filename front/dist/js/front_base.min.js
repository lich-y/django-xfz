function FrontBase(){}function Auth(){this.maskWrapper=$(".mask-wrapper"),this.scrollWrapper=$(".scroll-wrapper")}FrontBase.prototype.run=function(){this.listenAuthBoxHover()},FrontBase.prototype.listenAuthBoxHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},Auth.prototype.run=function(){var t=this;t.listenShowHideEvent(),t.listenSwitchEvent(),t.listenSigninEvent(),t.listenImgCaptchaEvent(),t.listenSmsCaptchaEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),o=$(".close-btn");n.click(function(){t.showEvent(),t.scrollWrapper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:-400})}),o.click(function(){t.hideEvent()})},Auth.prototype.listenImgCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.listenSmsCaptchaEvent=function(){var o=$(".sms-captcha-btn"),n=$(".signup-group input[name='telephone']");o.click(function(){var t=n.val();t||messageBox.showInfo("请输入手机号码"),xfzajax.get({url:"/account/sms_captcha/",data:{telephone:t},success:function(t){if(200===t.code){messageBox.showSuccess("短信验证码发送成功"),o.addClass("disabled");var n=60,e=setInterval(function(){o.text(n+"s"),--n<=0&&(clearInterval(e),o.removeClass("disabled"),o.text("发送验证码"))},1e3)}},fail:function(t){}})})},Auth.prototype.listenSwitchEvent=function(){var n=this;$(".switch").click(function(){var t=n.scrollWrapper.css("left");(t=parseInt(t))<0?n.scrollWrapper.animate({left:"0"}):n.scrollWrapper.animate({left:"-400px"})})},Auth.prototype.listenSigninEvent=function(){var i=this,t=$(".signin-group"),o=t.find("input[name='telephone']"),s=t.find("input[name='password']"),a=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=o.val(),n=s.val(),e=a.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){if(200==t.code)i.hideEvent(),window.location.reload();else{var n=t.message;if("string"==typeof n||n.constructor==String)window.messageBox.show(n);else for(var e in n){var o=n[e][0];window.messageBox.show(o)}}},fail:function(t){console.log(t)}})})},$(function(){var t=new Auth,n=new FrontBase;t.run(),n.run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInRoaXMiLCJtYXNrV3JhcHBlciIsIiQiLCJzY3JvbGxXcmFwcGVyIiwicHJvdG90eXBlIiwicnVuIiwibGlzdGVuQXV0aEJveEhvdmVyIiwiYXV0aEJveCIsInVzZXJNb3JlQm94IiwiaG92ZXIiLCJzaG93IiwiaGlkZSIsInNlbGYiLCJsaXN0ZW5TaG93SGlkZUV2ZW50IiwibGlzdGVuU3dpdGNoRXZlbnQiLCJsaXN0ZW5TaWduaW5FdmVudCIsImxpc3RlbkltZ0NhcHRjaGFFdmVudCIsImxpc3RlblNtc0NhcHRjaGFFdmVudCIsInNob3dFdmVudCIsImhpZGVFdmVudCIsInNpZ25pbkJ0biIsInNpZ251cEJ0biIsImNsb3NlQnRuIiwiY2xpY2siLCJjc3MiLCJsZWZ0IiwiSW1nQ2FwdGNoYSIsImF0dHIiLCJNYXRoIiwicmFuZG9tIiwic21zQ2FwdGNoYSIsInRlbGVwaG9uZUlucHV0IiwidGVsZXBob25lIiwidmFsIiwibWVzc2FnZUJveCIsInNob3dJbmZvIiwieGZ6YWpheCIsImdldCIsInVybCIsImRhdGEiLCJzdWNjZXNzIiwicmVzdWx0Iiwic2hvd1N1Y2Nlc3MiLCJhZGRDbGFzcyIsImNvdW50IiwidGltZXIiLCJzZXRJbnRlcnZhbCIsInRleHQiLCJjbGVhckludGVydmFsIiwicmVtb3ZlQ2xhc3MiLCJmYWlsIiwiZXJyb3IiLCJjdXJyZW50TGVmdCIsInBhcnNlSW50IiwiYW5pbWF0ZSIsInNlbHQiLCJzaWduaW5Hcm91cCIsImZpbmQiLCJwYXNzd29yZElucHV0IiwicmVtZW1iZXJJbnB1dCIsInBhc3N3b3JkIiwicmVtZW1iZXIiLCJwcm9wIiwicG9zdCIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwibWVzc2FnZU9iamVjdCIsImNvbnN0cnVjdG9yIiwiU3RyaW5nIiwia2V5IiwibWVzc2FnZSIsImNvbnNvbGUiLCJsb2ciLCJhdXRoIiwiZnJvbnRC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QkEsRUFBYSxLQUNiYyxFQUFLcEMsWUFDTDZDLE9BQU9DLFNBQVNDLGFBQ2IsQ0FDSCxJQUFJQyxFQUFnQjFCLEVBQWdCLFFBQ3BDLEdBQTRCLGlCQUFqQjBCLEdBQTZCQSxFQUFjQyxhQUFlQyxPQUNqRUwsT0FBTzlCLFdBQVd4QixLQUFLeUQsUUFFdkIsSUFBSyxJQUFJRyxLQUFPSCxFQUFlLENBQzNCLElBQ0lJLEVBRFdKLEVBQWNHLEdBQ04sR0FDdkJOLE9BQU85QixXQUFXeEIsS0FBSzZELE1BS3ZDckIsS0FBUSxTQUFVQyxHQUNkcUIsUUFBUUMsSUFBSXRCLFNBTTVCakQsRUFBRSxXQUNFLElBQUl3RSxFQUFPLElBQUkzRSxLQUNYNEUsRUFBWSxJQUFJN0UsVUFDcEI0RSxFQUFLckUsTUFDTHNFLEVBQVV0RSIsImZpbGUiOiJmcm9udF9iYXNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEZyb250QmFzZSgpIHtcclxuXHJcbn1cclxuXHJcbkZyb250QmFzZS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5BdXRoQm94SG92ZXIoKTtcclxufTtcclxuXHJcbkZyb250QmFzZS5wcm90b3R5cGUubGlzdGVuQXV0aEJveEhvdmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGF1dGhCb3ggPSAkKCcuYXV0aC1ib3gnKTtcclxuICAgIHZhciB1c2VyTW9yZUJveCA9ICQoJy51c2VyLW1vcmUtYm94Jyk7XHJcbiAgICBhdXRoQm94LmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB1c2VyTW9yZUJveC5zaG93KCk7XHJcbiAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdXNlck1vcmVCb3guaGlkZSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBBdXRoKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5tYXNrV3JhcHBlciA9ICQoXCIubWFzay13cmFwcGVyXCIpO1xyXG4gICAgc2VsZi5zY3JvbGxXcmFwcGVyID0gJChcIi5zY3JvbGwtd3JhcHBlclwiKTtcclxufVxyXG5cclxuQXV0aC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5TaG93SGlkZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblN3aXRjaEV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlblNpZ25pbkV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlbkltZ0NhcHRjaGFFdmVudCgpO1xyXG4gICAgc2VsZi5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQoKTtcclxufTtcclxuXHJcbkF1dGgucHJvdG90eXBlLnNob3dFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIuc2hvdygpO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUuaGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5tYXNrV3JhcHBlci5oaWRlKCk7XHJcbn07XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaG93SGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHNpZ25pbkJ0biA9ICQoJy5zaWduaW4tYnRuJyk7XHJcbiAgICB2YXIgc2lnbnVwQnRuID0gJCgnLnNpZ251cC1idG4nKTtcclxuICAgIHZhciBjbG9zZUJ0biA9ICQoJy5jbG9zZS1idG4nKTtcclxuICAgIHNpZ25pbkJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zaG93RXZlbnQoKTtcclxuICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKHsgJ2xlZnQnOiAwIH0pO1xyXG4gICAgfSk7XHJcbiAgICBzaWdudXBCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuc2hvd0V2ZW50KCk7XHJcbiAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7ICdsZWZ0JzogLTQwMCB9KTtcclxuICAgIH0pO1xyXG4gICAgY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcblxyXG5cclxuXHJcbkF1dGgucHJvdG90eXBlLmxpc3RlbkltZ0NhcHRjaGFFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBJbWdDYXB0Y2hhID0gJCgnLmltZy1jYXB0Y2hhJyk7XHJcbiAgICBJbWdDYXB0Y2hhLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBJbWdDYXB0Y2hhLmF0dHIoXCJzcmNcIiwgXCIvYWNjb3VudC9pbWdfY2FwdGNoYS9cIiArIFwiP3JhbmRvbT1cIiArIE1hdGgucmFuZG9tKCkpXHJcbiAgICB9KTtcclxufTtcclxuXHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TbXNDYXB0Y2hhRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc21zQ2FwdGNoYSA9ICQoXCIuc21zLWNhcHRjaGEtYnRuXCIpO1xyXG4gICAgdmFyIHRlbGVwaG9uZUlucHV0ID0gJChcIi5zaWdudXAtZ3JvdXAgaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIik7XHJcbiAgICBzbXNDYXB0Y2hhLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgaWYgKCF0ZWxlcGhvbmUpIHtcclxuICAgICAgICAgICAgbWVzc2FnZUJveC5zaG93SW5mbygn6K+36L6T5YWl5omL5py65Y+356CBJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvYWNjb3VudC9zbXNfY2FwdGNoYS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICd0ZWxlcGhvbmUnOiB0ZWxlcGhvbmVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+efreS/oemqjOivgeeggeWPkemAgeaIkOWKnycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNtc0NhcHRjaGEuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gNjA7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbXNDYXB0Y2hhLnRleHQoY291bnQgKyAncycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50LS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNtc0NhcHRjaGEucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbXNDYXB0Y2hhLnRleHQoJ+WPkemAgemqjOivgeeggScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdmYWlsJzogZnVuY3Rpb24gKGVycm9yKSB7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU3dpdGNoRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc3dpdGNoZXIgPSAkKFwiLnN3aXRjaFwiKTtcclxuICAgIHN3aXRjaGVyLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgY3VycmVudExlZnQgPSBzZWxmLnNjcm9sbFdyYXBwZXIuY3NzKFwibGVmdFwiKTtcclxuICAgICAgICBjdXJyZW50TGVmdCA9IHBhcnNlSW50KGN1cnJlbnRMZWZ0KTtcclxuICAgICAgICBpZiAoY3VycmVudExlZnQgPCAwKSB7XHJcbiAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIFwibGVmdFwiOiAnMCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgXCJsZWZ0XCI6IFwiLTQwMHB4XCJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5cclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU2lnbmluRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsdCA9IHRoaXM7XHJcbiAgICB2YXIgc2lnbmluR3JvdXAgPSAkKFwiLnNpZ25pbi1ncm91cFwiKTtcclxuICAgIHZhciB0ZWxlcGhvbmVJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSd0ZWxlcGhvbmUnXVwiKTtcclxuICAgIHZhciBwYXNzd29yZElucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3Bhc3N3b3JkJ11cIik7XHJcbiAgICB2YXIgcmVtZW1iZXJJbnB1dCA9IHNpZ25pbkdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdyZW1lbWJlciddXCIpO1xyXG5cclxuICAgIHZhciBzdWJtaXRCdG4gPSBzaWduaW5Hcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIik7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0ZWxlcGhvbmUgPSB0ZWxlcGhvbmVJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgcGFzc3dvcmQgPSBwYXNzd29yZElucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciByZW1lbWJlciA9IHJlbWVtYmVySW5wdXQucHJvcChcImNoZWNrZWRcIik7XHJcblxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvbG9naW4vJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzogdGVsZXBob25lLFxyXG4gICAgICAgICAgICAgICAgJ3Bhc3N3b3JkJzogcGFzc3dvcmQsXHJcbiAgICAgICAgICAgICAgICAncmVtZW1iZXInOiByZW1lbWJlciA/IDEgOiAwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbHQuaGlkZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IHJlc3VsdFsnbWVzc2FnZSddO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZU9iamVjdCA9PSAnc3RyaW5nJyB8fCBtZXNzYWdlT2JqZWN0LmNvbnN0cnVjdG9yID09IFN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KG1lc3NhZ2VPYmplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG1lc3NhZ2VPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlcyA9IG1lc3NhZ2VPYmplY3Rba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gbWVzc2FnZXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93KG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZmFpbCc6IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhdXRoID0gbmV3IEF1dGgoKTtcclxuICAgIHZhciBmcm9udEJhc2UgPSBuZXcgRnJvbnRCYXNlKCk7XHJcbiAgICBhdXRoLnJ1bigpO1xyXG4gICAgZnJvbnRCYXNlLnJ1bigpO1xyXG59KTtcclxuIl19
